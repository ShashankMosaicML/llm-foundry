max_seq_len: 8192
seed: 1
precision: amp_bf16

models:
-
  model_name: mosaicml/mpt-7b-chat-8k
  model:
    name: hf_causal_lm
    pretrained_model_name_or_path: mosaicml/mpt-7b-chat-8k
    pretrained: true
    attn_config:
      attn_impl: triton
  tokenizer:
    name: mosaicml/mpt-7b-chat-8k
    kwargs:
      model_max_length: ${max_seq_len}

device_eval_batch_size: 1 

# FSDP config for model sharding
fsdp_config:
  sharding_strategy: FULL_SHARD
  mixed_precision: FULL

icl_tasks:
-
  label: hotpot_qa_long_context_2k
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/hotpot_train_v1.1_context_len_2048_tokenizer_gpt-4_total_examples_2000.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: hotpot_qa_long_context_4k
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/hotpot_train_v1.1_context_len_4096_tokenizer_gpt-4_total_examples_2000.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: hotpot_qa_long_context_8k
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/hotpot_train_v1.1_context_len_8192_tokenizer_gpt-4_total_examples_2000.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: kv_pair_long_context_2k 
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/kv_pairs_len_2048.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: kv_pair_long_context_4k
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/kv_pairs_len_4096.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: kv_pair_long_context_8k 
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/kv_pairs_len_8192.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: wikiqa_2k 
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/2k-00000-of-00001-660102c50b0d19d1.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: wikiqa_4k 
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/4k-00000-of-00001-2376b963aef29b53.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50
-
  label: wikiqa_8k 
  dataset_uri: oci://mosaicml-internal-large-eval-datasets/8k-00000-of-00001-a85a1a8ab0c1beaf.jsonl
  num_fewshot: [0]
  icl_task_type: question_answering
  icl_subset_num_batches: 50